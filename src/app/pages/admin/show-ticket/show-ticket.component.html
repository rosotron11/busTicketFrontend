<div class="ticket-management">
    <h2 class="title">🎟️ Passenger Tickets</h2>

    <div class="ticket-grid">
        @for (ticket of tickets; track $index) {
        <div class="ticket-card">
            <div class="ticket-header">
                <h3>Ticket #{{ ticket.ticketNumber }}</h3>
                <span class="status" [ngClass]="{'paid': ticket.paymentStatus === 'Paid', 'unpaid': ticket.paymentStatus !== 'Paid'}">
                    {{ ticket.paymentStatus }}
                </span>
            </div>

            <div class="ticket-info">
                <p><strong>Boarding:</strong> {{ ticket.source }} at {{ ticket.boardingTime }}</p>
                <p><strong>Drop-Off:</strong> {{ ticket.destination }} at {{ ticket.droppingTime }}</p>
                <p><strong>Passengers:</strong></p>
                
                <ul>
                    @for (passenger of ticket.passengers; track $index) {
                    <li>
                        <strong>{{ passenger['name'] }}</strong> - Seat {{ passenger['seatNo'] }}
                    </li>
                }
                </ul>
            </div>

            <div class="ticket-actions">
                <button class="cancel-btn" (click)="deleteTicket(ticket)">❌ Cancel Ticket</button>
            </div>
        </div>
        }
    </div>

    <button class="close-btn" (click)="sendCloseSignal()">Close</button>
</div>
