<div class="bus-management-container">
    <h2 class="title">Bus Management</h2>

    <div class="bus-list">
        @for (bus of buses; track $index) {
        <div class="bus-card">
            <div class="bus-header">
                <h3>🚌 {{ bus.busNumber }}</h3>
                <span class="created-date">Created: {{ bus.createdOn }}</span>
            </div>

            <div class="bus-info">
                <p><strong>Vendor:</strong> {{ bus.vendorName }}</p>
                <p><strong>Route:</strong> {{ bus.source }} → {{ bus.destination }}</p>
                <p><strong>Date of Journey:</strong> {{ bus.dateOfJourney }}</p>
                <p><strong>Time:</strong> {{ bus.timeOfBoarding }} - {{ bus.timeOfDropping }}</p>
                <p><strong>Seats:</strong> {{ bus.bookedSeats }}/{{ bus.totalSeats }}</p>
                <p><strong>Price:</strong> Rs. {{ bus.price }}</p>
            </div>

            <div class="bus-actions">
                <button class="delete-btn" (click)="deleteBus(bus)">❌ Remove Bus</button>
                <button class="view-btn" (click)="seePassengers(bus)">👥 View Passengers</button>
            </div>

            @if (activatedTicket && selectedBus==bus) {
                <div class="passenger-panel">
                <app-bus-passengers [bus]="selectedBus" (closeChild)="closePanel()"></app-bus-passengers>
                </div>
            }
        </div>
        }
    </div>

    <button class="close-btn" (click)="sendCloseSignal()">Close</button>
</div>
